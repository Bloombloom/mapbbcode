<!DOCTYPE html>
<meta charset="utf-8">
<link rel="stylesheet" href="../dist/lib/leaflet.css" />
<script src="../dist/lib/leaflet.js"></script>

<script src="../src/MapBBCode.js"></script>
<script src="../src/MapBBCodeUI.js"></script>
<script src="../src/FunctionButton.js"></script>
<script src="../src/EditorSprites.js"></script>
<script src="../src/PopupIcon.js"></script>
<script src="../src/handlers/Handler.Text.js"></script>
<script src="../src/handlers/Handler.Toggle.js"></script>
<script src="../src/strings/English.js"></script>

<div id="test">[map]60.01,30(OK)[/map]</div>
<script>
window.onload = function() {
var mapBB = new MapBBCode({
	panelHook: function(c) {
		c.map.addControl(L.functionButtons({ content: 'Edit in JOSM', callback: function() {
			var bounds = c.map.getBounds(),
				url = 'http://127.0.0.1:8111/load_and_zoom' + L.Util.getParamString({
					left: bounds.getWest(),
					right: bounds.getEast(),
					top: bounds.getNorth(),
					bottom: bounds.getSouth()
				}),
				w = window.open(url);
			window.setTimeout(function() { w.close(); }, 1000);
		}}, { position: 'topleft' }));
	}
});
mapBB.show('test');
}
</script>
